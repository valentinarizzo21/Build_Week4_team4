@using BeviSano.Controllers
@{
    ViewData["Title"] = "Fidelity Card";
    Account MainAccount = HomeController.MainAccount;
}

<div>
    @if (MainAccount == null)
    {
        @* titolo *@
        <div class="fidelity_page">
            <div class="exclusive-message d-flex flex-column justify-content-center align-items-center my-4">
                <h1>Entra nel club esclusivo!</h1>
                <p>Accedi per sbloccare sconti irresistibili e vantaggi esclusivi.</p>
            </div>

            @* sconti *@
            <div class="benefits-container">
                <h2 class="benefits-title">Vantaggi esclusivi con la tua <span class="highlight">Fidelity Card BeviSano</span></h2>
                <div class="benefits-list">
                    <div class="benefit-item">
                        <i class="bi bi-percent benefit-icon"></i>
                        <div class="benefit-description">
                            <h3>Sconto del 15% sul totale</h3>
                            <p>Approfitta subito del tuo sconto esclusivo del 15% su tutti gli acquisti nel nostro store!</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <i class="bi bi-gift benefit-icon"></i>
                        <div class="benefit-description">
                            <h3>Omaggio di benvenuto</h3>
                            <p>Ricevi un regalo esclusivo per il tuo primo acquisto con la Fidelity Card.</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <i class="bi bi-tags benefit-icon"></i>
                        <div class="benefit-description">
                            <h3>Promozioni esclusive</h3>
                            <p>Ricevi accesso a offerte e sconti speciali solo per i membri.</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <i class="bi bi-award benefit-icon"></i>
                        <div class="benefit-description">
                            <h3>Punti fedeltà accumulabili</h3>
                            <p>Guadagna punti per ogni acquisto che effettui e ottieni sconti o premi speciali.</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <i class="bi bi-calendar-check benefit-icon"></i>
                        <div class="benefit-description">
                            <h3>Eventi VIP e anteprime</h3>
                            <p>Partecipa a eventi esclusivi e ricevi in anteprima le novità.</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <i class="bi bi-gear-wide-connected benefit-icon"></i>
                        <div class="benefit-description">
                            <h3>Personalizzazione delle offerte</h3>
                            <p>Ricevi offerte personalizzate in base ai tuoi acquisti precedenti.</p>
                        </div>
                    </div>
                    @* <div class="benefit-item">
             <i class="bi bi-truck benefit-icon"></i>
             <div class="benefit-description">
                <h3>Spedizione gratuita su ordini superiori a 50€</h3>
                <p>Spedizione gratuita per ordini superiori a 50€.</p>
             </div>
          </div> *@
                    <div class="benefit-item">
                        <i class="bi bi-box benefit-icon"></i>
                        <div class="benefit-description">
                            <h3>Accesso a prodotti limitati</h3>
                            <p>Scopri e acquista prodotti in edizione limitata riservati solo ai membri.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    }
    else
    {
        @if (MainAccount.fidelity)
        {
            @* titolo *@
            <div class="fidelity_page">
                <div class="exclusive_message d-flex justify-content-center align-items-center my-4">
                    <h1>Bevi Sano ti da il benvenuto nella tua sezione @MainAccount.Name!</h1>
                </div>
                @* card *@
                <div class="fidelity_card">
                    <div class="card-container my-4 d-flex justify-content-center">
                        <div class="card d-flex flex-column text-white">
                            <div class="card_header_annulla">
                                <h2 class="card-title">Benvenuto, <span class="card-name">@MainAccount.Name</span></h2>
                            </div>
                            <div class="card-body m-0 p-0 my-3">
                                <div class="progress-bar-container">
                                    <div class="progress-bar">
                                        <div class="progress" style="width: 75%;"></div>
                                    </div>
                                    <p class="progress-text text-center my-2">75% al prossimo premio!</p>
                                </div>
                            </div>
                            <div class="card_header_annulla align-self-end">
                                <img src="~/lib/img/BarCode_logo.png" style="height: 70px; width: 140px" />
                            </div>
                        </div>
                    </div>
                </div>

                @* sconti *@
                <div class="benefits-container">

                    <h2 class="benefits-title">Vantaggi esclusivi della tua <span class="highlight">Fidelity Card BeviSano</span></h2>
                    <div class="benefits-list">
                        <div class="benefit-item">
                            <i class="bi bi-percent benefit-icon"></i>
                            <div class="benefit-description">
                                <h3>Sconto del 15% sul totale</h3>
                                <p>Approfitta subito del tuo sconto esclusivo del 15% su tutti gli acquisti nel nostro store!</p>
                            </div>
                        </div>
                        <div class="benefit-item">
                            <i class="bi bi-gift benefit-icon"></i>
                            <div class="benefit-description">
                                <h3>Omaggio di benvenuto</h3>
                                <p>Ricevi un regalo esclusivo per il tuo primo acquisto con la Fidelity Card.</p>
                            </div>
                        </div>
                        <div class="benefit-item">
                            <i class="bi bi-tags benefit-icon"></i>
                            <div class="benefit-description">
                                <h3>Promozioni esclusive</h3>
                                <p>Ricevi accesso a offerte e sconti speciali solo per i membri.</p>
                            </div>
                        </div>
                        <div class="benefit-item">
                            <i class="bi bi-award benefit-icon"></i>
                            <div class="benefit-description">
                                <h3>Punti fedeltà accumulabili</h3>
                                <p>Guadagna punti per ogni acquisto che effettui e ottieni sconti o premi speciali.</p>
                            </div>
                        </div>
                        <div class="benefit-item">
                            <i class="bi bi-calendar-check benefit-icon"></i>
                            <div class="benefit-description">
                                <h3>Eventi VIP e anteprime</h3>
                                <p>Partecipa a eventi esclusivi e ricevi in anteprima le novità.</p>
                            </div>
                        </div>
                        <div class="benefit-item">
                            <i class="bi bi-gear-wide-connected benefit-icon"></i>
                            <div class="benefit-description">
                                <h3>Personalizzazione delle offerte</h3>
                                <p>Ricevi offerte personalizzate in base ai tuoi acquisti precedenti.</p>
                            </div>
                        </div>
                        @* <div class="benefit-item">
                 <i class="bi bi-truck benefit-icon"></i>
                 <div class="benefit-description">
                    <h3>Spedizione gratuita su ordini superiori a 50€</h3>
                    <p>Spedizione gratuita per ordini superiori a 50€.</p>
                 </div>
              </div> *@
                        <div class="benefit-item">
                            <i class="bi bi-box benefit-icon"></i>
                            <div class="benefit-description">
                                <h3>Accesso a prodotti limitati</h3>
                                <p>Scopri e acquista prodotti in edizione limitata riservati solo ai membri.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        else
        {
            if (MainAccount.fidelity) { }

            <div class="fidelity_page">
                <div class="exclusive_message d-flex justify-content-center align-items-center my-4">
                    <h1>Bevi Sano ti da il benvenuto nella tua sezione @MainAccount.Name!</h1>
                </div>
                <div class="container exclusive_message my-4">
                    <h4>
                        Richiedi ora la tua fidelity card!
                    </h4>
                    <a asp-controller="Home" asp-action="ActivateFidelity" id="fidelityCardActivation" class="btn btn-success">Richiedi card</a>
                    <div id="loader" class="d-none">
                        <div class="wine-loader">
                            <div class="wine__icon">
                                <svg width="103" height="221" viewBox="0 0 103 221" fill="none" xmlns="http://www.w3.org/2000/svg">

                                    <ellipse class="wine-loader__base" cx="53.3448" cy="211.131" rx="29.0207" ry="7.82862" fill="#CFD8DE" />
                                    <path d="M24.9364 211.214C27.6951 222.779 79.646 221.775 81.9479 211.214" stroke="#BBC6CD" />
                                    <path class="wine-loader__stem__line" d="M45.2728 207.773C45.7034 208.026 49.3507 211.546 53.682 211.243C58.0132 210.939 60.926 208.862 61.8885 207.773" stroke="#BBC6CD" />
                                    <path class="wine-loader__stem" d="M50.6965 182.111C50.8778 170.978 49.962 146.421 45.1195 138.867L52.1696 139.268C52.1696 139.268 62.3279 137.937 60.0944 138.327C57.8609 138.717 55.6702 160.724 55.9189 182.111C56.1178 199.22 59.9807 206.316 61.8873 207.725C59.732 210.295 53.3747 213.893 45.1873 207.725C49.9316 203.349 50.8369 188.825 50.6965 182.111Z" fill="#D0E0EA" />
                                    <path class="wine-loader__glass__shadow" d="M59.4114 138.925C56.0309 139.499 48.3337 139.095 45.2942 139.095C46.5273 141.306 47.4156 144.254 47.7051 145.595H57.854C58.0003 144.461 58.5397 141.519 59.4114 138.925Z" fill="url(#paint0_linear)" fill-opacity="0.14" />
                                    <path class="wine-loader__glass" d="M102.699 107.453C102.39 90.0012 93.8088 39.3831 85.6992 7.45316H13.5996C6.10754 44.9654 -0.414182 90.3732 0.329871 107.453C1.07392 124.533 22.2793 139.414 52.4133 139.414C82.5473 139.414 103.009 124.905 102.699 107.453Z" fill="url(#paint1_linear)" />
                                    <!-- <path class="wine-loader__glass__top" d="M85.6914 7.38572C85.6914 10.9453 69.512 13.7847 49.4723 13.7847C29.4326 13.7847 13.5925 11.0896 13.5925 7.53001C13.5925 3.97046 29.4326 0.89447 49.4723 0.89447C69.512 0.89447 85.6914 3.82617 85.6914 7.38572Z" fill="url(#paint2_linear)"/> -->
                                    <path d="M96.7567 80.0351L5.09615 79.0666C5.09615 79.0666 3.13212 89.4363 3.84069 105.702C4.54926 121.967 23.7434 136.138 52.4403 136.138C81.1371 136.138 99.6227 122.321 99.328 105.702C99.0333 89.082 96.7567 80.0351 96.7567 80.0351Z" fill="url(#paint3_linear)" />
                                    <!-- <path class="wine-loader__wine__top" d="M96.7519 80.0291C96.7519 83.5887 76.0735 86.4282 50.4614 86.4282C24.8493 86.4282 5.01546 82.8725 5.01546 79.3129C5.01546 75.7534 24.8493 73.5379 50.4614 73.5379C76.0735 73.5379 96.7519 76.4696 96.7519 80.0291Z" fill="url(#paint4_linear)"/> -->
                                    <path class="wine-loader__shine--light" opacity="0.3" d="M32.5024 127.848C-7.72748 120.164 6.69586 94.7077 17.1336 14.617C26.1615 17.7811 31.8243 17.5551 34.0844 17.7811C30.4682 44.2243 23.8236 105.247 32.5024 127.848Z" fill="url(#paint5_linear)" />
                                    <!-- <path class="wine-loader__shine--dark" opacity="0.2" d="M71.1864 128.848C110.16 119.858 97.1956 102.604 84.816 12.0471C76.5765 15.7512 69.0982 15.5252 66.9775 15.7512C70.3706 42.1945 79.3298 106.247 71.1864 128.848Z" fill="url(#paint6_linear)"/> -->
                                    <defs>
                                        <linearGradient id="paint0_linear" x1="52.2767" y1="139.286" x2="52.2767" y2="145.595" gradientUnits="userSpaceOnUse">
                                            <stop />
                                            <stop offset="1" stop-opacity="0" />
                                        </linearGradient>
                                        <linearGradient id="paint1_linear" x1="102.703" y1="105.11" x2="0.271844" y2="105.11" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#BDC8CF" />
                                            <stop offset="0.502762" stop-color="#F6F9FC" />
                                            <stop offset="1" stop-color="#BDC8CF" />
                                        </linearGradient>
                                        <linearGradient id="paint2_linear" x1="13.5925" y1="10.1636" x2="85.6914" y2="7.33961" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#E0F1FC" />
                                            <stop offset="0.502762" stop-color="#C5D7E2" />
                                            <stop offset="1" stop-color="#E0F1FC" />
                                        </linearGradient>
                                        <linearGradient id="paint3_linear" x1="51.509" y1="77.6027" x2="51.509" y2="136.138" gradientUnits="userSpaceOnUse">
                                            <stop class="wine-loader__wine__stop-1" offset="0" stop-color="transparent" />
                                            <stop class="wine-loader__wine__stop-2" offset="0.000001" stop-color="#903A3A" />
                                            <stop class="wine-loader__wine__stop-3" offset=".999999" stop-color="#551B1B" />
                                            <stop class="wine-loader__wine__stop-4" offset="1" stop-color="transparent" />
                                        </linearGradient>
                                        <linearGradient id="paint4_linear" x1="50.8837" y1="73.5379" x2="50.8837" y2="86.4282" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#883A3A" />
                                            <stop offset="1" stop-color="#A14545" />
                                        </linearGradient>
                                        <linearGradient id="paint5_linear" x1="9.22325" y1="74.5097" x2="28.8862" y2="75.6398" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="white" />
                                            <stop offset="0.690608" stop-color="white" stop-opacity="0" />
                                            <stop offset="1" stop-color="white" stop-opacity="0" />
                                        </linearGradient>
                                        <linearGradient id="paint6_linear" x1="93.0295" y1="75.5097" x2="74.5723" y2="76.5051" gradientUnits="userSpaceOnUse">
                                            <stop />
                                            <stop offset="0.690608" stop-opacity="0" />
                                            <stop offset="1" stop-opacity="0" />
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        }


    }
</div>

<script>
    let fidelityBtn = document.getElementById("fidelityCardActivation");
    let loader = document.getElementById("loader");

    fidelityBtn.addEventListener('click', (e) => {
        e.preventDefault();

        loader.classList.remove('d-none');
        loader.classList.add('d-block');

        setTimeout(() => { window.location.assign("/Home/ActivateFidelity"); }, 5000);
    })
</script>

<script>
    function loading(speed = 20){
      var stop1 = document.querySelector('.wine-loader__wine__stop-1')
      var stop2 = document.querySelector('.wine-loader__wine__stop-2')

      var maxVal = 0.98;
      var increment = maxVal/50
      var j = -1

      window.setInterval(function () {
          var stop1Offset = stop1.offset.baseVal

          if (stop1Offset.toFixed(2) == 0.98 || stop1Offset.toFixed(2) == 0.00){
            j = j * -1
          }
          stop1.setAttribute('offset',stop1.offset.baseVal + (increment * j))
          stop2.setAttribute('offset', stop2.offset.baseVal + (increment * j))
        }, speed)
    }

    loading();
</script>